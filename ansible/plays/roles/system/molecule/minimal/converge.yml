---
- name: Converge (Minimal)
  hosts: all
  become: true
  vars:
    create_user: testuser
    copy_local_key: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC... testkey"
    sys_packages:
      - jq
      - curl
      - vim
  tasks:
    # Use include_role to maintain role context for template lookups
    - name: Run system role tasks (user)
      include_role:
        name: system
        tasks_from: user
      tags: [system.user]

    - name: Run system role tasks (journald)
      include_role:
        name: system
        tasks_from: journald
      tags: [system.journald]
